{"version":3,"file":"Particles.js","names":["useFrame","React","useEffect","useRef","useState","AdditiveBlending","CanvasTexture","Float32BufferAttribute","Uint16BufferAttribute","Vector2","Vector3","ParticlesMaterial","Particles","bitmap","indices","offsets","options","props","texture","setTexture","particlesMaterialRef","random","depth","size","color","innerColor","exponent","speed","clock","current","uniforms","uTime","value","elapsedTime","Math","PI","image","width","height","r","g","b","key"],"sources":["../../src/components/Particles.js"],"sourcesContent":["import { useFrame } from \"@react-three/fiber\"\nimport React, { useEffect, useRef, useState } from \"react\"\nimport {\n  AdditiveBlending,\n  CanvasTexture,\n  Float32BufferAttribute,\n  Uint16BufferAttribute,\n  Vector2,\n  Vector3,\n} from \"three\"\nimport { ParticlesMaterial } from \"./ParticlesMaterial\"\n\nconst Particles = ({ bitmap, indices, offsets, options, ...props }) => {\n  const [texture, setTexture] = useState()\n\n  const particlesMaterialRef = useRef()\n\n  const { random, depth, size, color, innerColor, exponent, speed } = options\n\n  useFrame(({ clock }) => {\n    if (particlesMaterialRef.current) {\n      particlesMaterialRef.current.uniforms.uTime.value = clock.elapsedTime\n    }\n  })\n\n  useEffect(() => {\n    setTexture(new CanvasTexture(bitmap))\n  }, [bitmap])\n\n  return (\n    <>\n      {texture && (\n        <mesh rotation-y={Math.PI} {...props}>\n          <instancedBufferGeometry\n            index={new Uint16BufferAttribute([0, 2, 1, 2, 3, 1], 1)}\n            attributes-position={\n              new Float32BufferAttribute(\n                [\n                  -0.5, 0.5, 0.0, 0.5, 0.5, 0.0, -0.5, -0.5, 0.0, 0.5, -0.5,\n                  0.0,\n                ],\n                3,\n              )\n            }\n            attributes-uv={\n              new Float32BufferAttribute(\n                [0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 1.0],\n                2,\n              )\n            }>\n            <instancedBufferAttribute\n              attach=\"attributes-pindex\"\n              args={[indices, 1, false]}\n            />\n            <instancedBufferAttribute\n              attach=\"attributes-offset\"\n              args={[offsets, 3, false]}\n            />\n            <instancedBufferAttribute />\n          </instancedBufferGeometry>\n          <particlesMaterial\n            ref={particlesMaterialRef}\n            key={ParticlesMaterial.key}\n            uTexture={texture}\n            uTextureSize={\n              new Vector2(texture.image.width, texture.image.height)\n            }\n            uRandom={random}\n            uDepth={depth}\n            uSize={size}\n            uSpeed={speed}\n            uColor={\n              new Vector3(color.r / 255.0, color.g / 255.0, color.b / 255.0)\n            }\n            uInnerColor={\n              new Vector3(\n                innerColor.r / 255.0,\n                innerColor.g / 255.0,\n                innerColor.b / 255.0,\n              )\n            }\n            uExponent={exponent}\n            blending={AdditiveBlending}\n            depthWrite={false}\n          />\n        </mesh>\n      )}\n    </>\n  )\n}\n\nexport default Particles\n"],"mappings":"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"}